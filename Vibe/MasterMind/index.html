<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2c3e50">
    <meta name="description" content="Mastermind - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Mastermind">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="icon" type="image/png" href="favicon.png" />
	<link rel="manifest" href="./manifest.json" />
	<script>
		if ("serviceWorker" in navigator) {
			window.addEventListener("load", () => {
				navigator.serviceWorker.register('/html/Vibe/MasterMind/sw.js', { scope: '/html/Vibe/MasterMind/' });
			});
		}
	</script>
    <title>Mastermind</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #4a6491 100%);
            min-height: 100vh;
            padding: 5px;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            width: 100%;
            display: flex;
            flex-direction: column;
            height: 100vh;
            justify-content: flex-end;
            padding-top: 50px;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 10px;
            font-size: 5vw;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: absolute;
            top: 5px;
            left: 10%;
            right: 10%;
            width: 80%;
            font-weight: 600;
        }
        
        .game-area {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 12px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-bottom: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #6c8ebd #2c3e50;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .game-area::-webkit-scrollbar {
            width: 8px;
        }
        
        .game-area::-webkit-scrollbar-track {
            background: rgba(44, 62, 80, 0.3);
            border-radius: 4px;
        }
        
        .game-area::-webkit-scrollbar-thumb {
            background: #6c8ebd;
            border-radius: 4px;
        }
        
        .game-area::-webkit-scrollbar-thumb:hover {
            background: #7da0d6;
        }
        
        .sequence-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-top: auto;
            width: 100%;
        }
        
        .sequence-row {
            display: flex;
            gap: 2%;
            margin-bottom: 10px;
            align-items: center;
            width: 100%;
            padding: 6px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .attempt-number {
            font-size: 4vw;
            font-weight: 600;
            color: #e0e0e0;
            min-width: 8%;
            text-align: center;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .color-slots {
            display: flex;
            gap: 2%;
            width: 65%;
        }
        
        .color-slot {
            width: 20%;
            aspect-ratio: 1/1;
            border-radius: 50%;
            border: 2px solid #ffffff;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            background: #2c3e50;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .feedback {
            display: flex;
            gap: 4px;
            margin-left: 2%;
            flex-wrap: wrap;
            width: 20%;
        }
        
        .feedback-dot {
            width: 30%;
            aspect-ratio: 1/1;
            border-radius: 50%;
            border: 1px solid #ffffff;
        }
        
        .black { background: #000000; }
        .white { background: #cccccc; }
        
        .color-palette {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 12px 0;
        }
        
        .palette-row {
            display: flex;
            gap: 4%;
            align-items: center;
            justify-content: flex-start;
            padding-left: 5%;
        }
        
        .color-circle {
            width: 15vw;
            height: 15vw;
            max-width: 70px;
            max-height: 70px;
            min-width: 45px;
            min-height: 45px;
            border-radius: 50%;
            border: 2px solid #ffffff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            aspect-ratio: 1/1;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .color-circle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }
        
        .color-circle:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 8px;
        }
        
        .control-row {
            display: flex;
            gap: 12px;
            justify-content: center;
            align-items: center;
        }
        
        .btn {
            padding: 2.5vw 4vw;
            font-size: 3.5vw;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .btn-check {
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
        }
        
        .btn-remove {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }
        
        .btn-new-game {
            background: linear-gradient(135deg, #5d6d7e 0%, #4d5d6d 100%);
            min-width: 22%;
            font-size: 3vw;
        }
        
        .btn-help {
            background: linear-gradient(135deg, #5d6d7e 0%, #4d5d6d 100%);
            min-width: 22%;
            font-size: 3vw;
        }
        
        .btn-difficulty {
            background: linear-gradient(135deg, #5d6d7e 0%, #4d5d6d 100%);
            min-width: 22%;
            font-size: 3vw;
        }
        
        .btn-stats {
            background: linear-gradient(135deg, #5d6d7e 0%, #4d5d6d 100%);
            min-width: 22%;
            font-size: 3vw;
        }
        
        .btn-surrender {
            background: linear-gradient(135deg, #7f8c8d 0%, #95a5a6 100%);
            min-width: 25%;
            font-size: 3vw;
        }
        
        .current-row {
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            margin: auto;
            padding: 5vw;
            border-radius: 12px;
            box-shadow: 0 12px 36px rgba(0, 0, 0, 0.5);
            max-width: 90%;
            width: 80vw;
            text-align: center;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .modal h2 {
            margin-bottom: 4vw;
            font-size: 5vw;
            font-weight: 600;
            color: #ecf0f1;
        }
        
        .modal p {
            margin-bottom: 3vw;
            font-size: 3.5vw;
            line-height: 1.5;
            color: #bdc3c7;
        }
        
        .modal-buttons {
            display: flex;
            gap: 3vw;
            justify-content: center;
            margin-top: 4vw;
            flex-wrap: wrap;
        }
        
        .modal-btn {
            padding: 2vw 4vw;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 3.5vw;
            min-height: 40px;
            margin: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        
        .modal-btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .close-btn {
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
        }
        
        .reset-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }
        
        .stats {
            background: rgba(255, 255, 255, 0.1);
            padding: 3vw;
            border-radius: 8px;
            margin: 3vw 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .secret-code {
            display: flex;
            justify-content: center;
            gap: 2vw;
            margin: 3vw 0;
        }
        
        .secret-color {
            width: 8vw;
            height: 8vw;
            max-width: 35px;
            max-height: 35px;
            border-radius: 50%;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .notification {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(44, 62, 80, 0.95);
            color: #ecf0f1;
            padding: 18px 30px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 500;
            z-index: 2000;
            display: none;
            box-shadow: 0 8px 24px rgba(0,0,0,0.4);
            border: 1px solid rgba(255, 255, 255, 0.15);
            text-align: center;
            min-width: 250px;
        }
        
        .difficulty-selector {
            display: flex;
            flex-direction: column;
            gap: 18px;
            margin: 25px 0;
        }
        
        .difficulty-option {
            padding: 18px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.08);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .difficulty-option:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .difficulty-option.selected {
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
            box-shadow: 0 0 15px rgba(39, 174, 96, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .difficulty-option h3 {
            color: #ecf0f1;
            margin-bottom: 8px;
            font-size: 4vw;
        }
        
        .difficulty-option p {
            color: #bdc3c7;
            font-size: 3vw;
            line-height: 1.4;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stat-value {
            font-size: 6vw;
            font-weight: 700;
            color: #27ae60;
            margin: 5px 0;
        }
        
        .stat-label {
            font-size: 3vw;
            color: #bdc3c7;
        }
        
        .difficulty-stats {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .difficulty-stats h3 {
            color: #ecf0f1;
            margin-bottom: 10px;
            font-size: 4vw;
        }
        
        .difficulty-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 3vw;
        }
        
        .difficulty-name {
            color: #bdc3c7;
        }
        
        .difficulty-value {
            color: #27ae60;
            font-weight: 600;
        }
        
        @media (max-width: 480px) {
            .color-circle {
                width: 14vw;
                height: 14vw;
                max-width: 65px;
                max-height: 65px;
                min-width: 40px;
                min-height: 40px;
            }
            
            .btn {
                padding: 2vw 3vw;
                font-size: 3vw;
            }
            
            .btn-new-game, .btn-help, .btn-difficulty, .btn-stats {
                font-size: 2.5vw;
            }
            
            .modal-content {
                padding: 4vw;
            }
            
            .modal h2 {
                font-size: 4.5vw;
            }
            
            .modal p {
                font-size: 3vw;
            }
            
            .modal-btn {
                font-size: 3vw;
            }
            
            .container {
                padding-top: 40px;
            }
            
            h1 {
                font-size: 6vw;
            }
            
            .notification {
                font-size: 16px;
                padding: 15px 25px;
                min-width: 220px;
            }
            
            .difficulty-option h3 {
                font-size: 16px;
            }
            
            .difficulty-option p {
                font-size: 14px;
            }
            
            .stat-value {
                font-size: 24px;
            }
            
            .stat-label {
                font-size: 14px;
            }
            
            .difficulty-stats h3 {
                font-size: 16px;
            }
            
            .difficulty-row {
                font-size: 14px;
            }
        }
        
        @media (min-width: 768px) {
            .color-circle {
                width: 65px;
                height: 65px;
            }
            
            .btn {
                font-size: 16px;
                padding: 12px 20px;
            }
            
            .btn-new-game, .btn-help, .btn-difficulty, .btn-stats {
                font-size: 15px;
            }
            
            .modal-content {
                padding: 25px;
            }
            
            .modal h2 {
                font-size: 26px;
            }
            
            .modal p {
                font-size: 17px;
            }
            
            .modal-btn {
                font-size: 16px;
                padding: 12px 20px;
            }
            
            h1 {
                font-size: 30px;
            }
            
            .notification {
                font-size: 19px;
                padding: 20px 35px;
                min-width: 300px;
            }
            
            .difficulty-option h3 {
                font-size: 20px;
            }
            
            .difficulty-option p {
                font-size: 16px;
            }
            
            .stat-value {
                font-size: 28px;
            }
            
            .stat-label {
                font-size: 16px;
            }
            
            .difficulty-stats h3 {
                font-size: 20px;
            }
            
            .difficulty-row {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Mastermind</h1>
        
        <div class="game-area" id="gameArea">
            <div class="sequence-container" id="sequenceContainer">
                <!-- –ò–≥—Ä–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
        </div>
        
        <div class="color-palette">
            <div class="palette-row">
                <div class="color-circle" style="background: #FF4136;" data-color="#FF4136"></div>
                <div class="color-circle" style="background: #0074D9;" data-color="#0074D9"></div>
                <div class="color-circle" style="background: #2ECC40;" data-color="#2ECC40"></div>
                <button class="btn btn-check" id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
            <div class="palette-row">
                <div class="color-circle" style="background: #FFDC00;" data-color="#FFDC00"></div>
                <div class="color-circle" style="background: #FF69B4;" data-color="#FF69B4"></div>
                <div class="color-circle" style="background: #FF851B;" data-color="#FF851B"></div>
                <div>
                    <button class="btn btn-remove" id="removeBtn">–£–±—Ä–∞—Ç—å</button>
                    <button class="btn btn-surrender" id="surrenderBtn" style="display: none;">–°–¥–∞—Ç—å—Å—è</button>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-row">
                <button class="btn btn-new-game" id="newGameBtn">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                <button class="btn btn-difficulty" id="difficultyBtn">–°–ª–æ–∂–Ω–æ—Å—Ç—å</button>
                <button class="btn btn-help" id="helpBtn">–ü–æ–º–æ—â—å</button>
                <button class="btn btn-stats" id="statsBtn">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–±–µ–¥—ã -->
    <div id="winModal" class="modal">
        <div class="modal-content">
            <h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ</h2>
            <p>–í—ã —É—Å–ø–µ—à–Ω–æ —É–≥–∞–¥–∞–ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å!</p>
            <div class="stats">
                <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫: <span id="attemptsCount">0</span></p>
            </div>
            <p>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</p>
            <div class="secret-code" id="winSecretCode">
                <!-- –¶–≤–µ—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
            </div>
            <div class="modal-buttons">
                <button class="modal-btn close-btn" id="closeWinModal">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–º–æ—â–∏ -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <h2>‚ùì –ü–æ–º–æ—â—å ‚ùì</h2>
            <p><strong>–¶–µ–ª—å –∏–≥—Ä—ã:</strong> –£–≥–∞–¥–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑ 4 —Ü–≤–µ—Ç–æ–≤.</p>
            <p><strong>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</strong></p>
            <p>1. –í—ã–±–∏—Ä–∞–π—Ç–µ —Ü–≤–µ—Ç–∞, –Ω–∞–∂–∏–º–∞—è –Ω–∞ –∫—Ä—É–∂–∫–∏ –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞</p>
            <p>2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 4 —Ü–≤–µ—Ç–∞–º–∏</p>
            <p>3. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫</p>
            <p>4. –ß–µ—Ä–Ω—ã–µ —Ç–æ—á–∫–∏ = –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ</p>
            <p>5. –°–µ—Ä—ã–µ —Ç–æ—á–∫–∏ = –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ</p>
            <p>6. –¶–≤–µ—Ç–∞ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è!</p>
            <p>7. –£–≥–∞–¥–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫!</p>
            <div class="modal-buttons">
                <button class="modal-btn close-btn" id="closeHelpModal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—Ä–∞–∂–µ–Ω–∏—è -->
    <div id="loseModal" class="modal">
        <div class="modal-content">
            <h2>üòî –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</h2>
            <p>–í—ã –Ω–µ —Å–º–æ–≥–ª–∏ —É–≥–∞–¥–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å.</p>
            <p>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</p>
            <div class="secret-code" id="loseSecretCode">
                <!-- –¶–≤–µ—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
            </div>
            <div class="modal-buttons">
                <button class="modal-btn close-btn" id="closeLoseModal">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ -->
    <div id="difficultyModal" class="modal">
        <div class="modal-content">
            <h2>üéöÔ∏è –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</h2>
            <div class="difficulty-selector">
                <div class="difficulty-option" data-difficulty="1">
                    <h3>–õ–µ–≥–∫–∏–π (20 –ø–æ–ø—ã—Ç–æ–∫)</h3>
                    <p>–ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–µ. –î–æ—Å—Ç—É–ø–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–°–¥–∞—Ç—å—Å—è"</p>
                </div>
                <div class="difficulty-option" data-difficulty="2">
                    <h3>–°—Ä–µ–¥–Ω–∏–π (10 –ø–æ–ø—ã—Ç–æ–∫)</h3>
                    <p>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏–≥—Ä—ã</p>
                </div>
                <div class="difficulty-option" data-difficulty="3">
                    <h3>–°–ª–æ–∂–Ω—ã–π (6 –ø–æ–ø—ã—Ç–æ–∫)</h3>
                    <p>–ú–∏–Ω–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤</p>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn close-btn" id="closeDifficultyModal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–¥–∞—á–∏ -->
    <div id="surrenderModal" class="modal">
        <div class="modal-content">
            <h2>üè≥Ô∏è –°–¥–∞—á–∞</h2>
            <p>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</p>
            <div class="secret-code" id="surrenderSecretCode">
                <!-- –¶–≤–µ—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
            </div>
            <div class="modal-buttons">
                <button class="modal-btn close-btn" id="closeSurrenderModal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div id="statsModal" class="modal">
        <div class="modal-content">
            <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="totalGames">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalWins">0</div>
                    <div class="stat-label">–ü–æ–±–µ–¥</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="winRate">0%</div>
                    <div class="stat-label">–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="avgAttempts">0</div>
                    <div class="stat-label">–°—Ä–µ–¥. –ø–æ–ø—ã—Ç–æ–∫</div>
                </div>
            </div>
            
            <div class="difficulty-stats">
                <h3>–ü–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:</h3>
                <div class="difficulty-row">
                    <span class="difficulty-name">–õ–µ–≥–∫–∏–π:</span>
                    <span class="difficulty-value" id="easyStats">0/0 (0%)</span>
                </div>
                <div class="difficulty-row">
                    <span class="difficulty-name">–°—Ä–µ–¥–Ω–∏–π:</span>
                    <span class="difficulty-value" id="mediumStats">0/0 (0%)</span>
                </div>
                <div class="difficulty-row">
                    <span class="difficulty-name">–°–ª–æ–∂–Ω—ã–π:</span>
                    <span class="difficulty-value" id="hardStats">0/0 (0%)</span>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn reset-btn" id="resetStatsBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="modal-btn close-btn" id="closeStatsModal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="notification" class="notification"></div>

    <script>
        class MastermindGame {
            constructor() {
                this.colors = ['#FF4136', '#0074D9', '#2ECC40', '#FFDC00', '#FF69B4', '#FF851B'];
                this.sequenceLength = 4;
                this.difficulty = 2; // 1 - –ª–µ–≥–∫–∏–π (20), 2 - —Å—Ä–µ–¥–Ω–∏–π (10), 3 - —Å–ª–æ–∂–Ω—ã–π (6)
                this.maxAttempts = 10;
                this.currentAttempt = 0;
                this.secretCode = this.generateSecretCode();
                this.gameArea = document.getElementById('gameArea');
                this.sequenceContainer = document.getElementById('sequenceContainer');
                this.removeBtn = document.getElementById('removeBtn');
                this.checkBtn = document.getElementById('checkBtn');
                this.newGameBtn = document.getElementById('newGameBtn');
                this.helpBtn = document.getElementById('helpBtn');
                this.difficultyBtn = document.getElementById('difficultyBtn');
                this.statsBtn = document.getElementById('statsBtn');
                this.surrenderBtn = document.getElementById('surrenderBtn');
                this.winModal = document.getElementById('winModal');
                this.helpModal = document.getElementById('helpModal');
                this.loseModal = document.getElementById('loseModal');
                this.difficultyModal = document.getElementById('difficultyModal');
                this.surrenderModal = document.getElementById('surrenderModal');
                this.statsModal = document.getElementById('statsModal');
                this.closeWinModal = document.getElementById('closeWinModal');
                this.closeHelpModal = document.getElementById('closeHelpModal');
                this.closeLoseModal = document.getElementById('closeLoseModal');
                this.closeDifficultyModal = document.getElementById('closeDifficultyModal');
                this.closeSurrenderModal = document.getElementById('closeSurrenderModal');
                this.closeStatsModal = document.getElementById('closeStatsModal');
                this.resetStatsBtn = document.getElementById('resetStatsBtn');
                this.notification = document.getElementById('notification');
                
                this.gameStartTime = Date.now();
                this.loadStats();
                this.initializeGame();
                this.bindEvents();
            }
            
            getAttemptsByDifficulty(difficulty) {
                switch(difficulty) {
                    case 1: return 20;
                    case 2: return 10;
                    case 3: return 6;
                    default: return 10;
                }
            }
            
            generateSecretCode() {
                const code = [];
                for (let i = 0; i < this.sequenceLength; i++) {
                    const randomIndex = Math.floor(Math.random() * this.colors.length);
                    code.push(this.colors[randomIndex]);
                }
                return code;
            }
            
            initializeGame() {
                this.sequenceContainer.innerHTML = '';
                this.currentAttempt = 0;
                this.maxAttempts = this.getAttemptsByDifficulty(this.difficulty);
                this.gameStartTime = Date.now();
                this.updateSurrenderButton();
                this.addNewRow();
            }
            
            addNewRow() {
                if (this.currentAttempt >= this.maxAttempts) return;
                
                const row = document.createElement('div');
                row.className = 'sequence-row current-row';
                row.id = `row-${this.currentAttempt}`;
                
                // –ù–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏
                const attemptNumber = document.createElement('div');
                attemptNumber.className = 'attempt-number';
                attemptNumber.textContent = this.currentAttempt + 1;
                row.appendChild(attemptNumber);
                
                // –°–ª–æ—Ç—ã –¥–ª—è —Ü–≤–µ—Ç–æ–≤
                const colorSlots = document.createElement('div');
                colorSlots.className = 'color-slots';
                
                for (let i = 0; i < this.sequenceLength; i++) {
                    const slot = document.createElement('div');
                    slot.className = 'color-slot';
                    slot.dataset.index = i;
                    colorSlots.appendChild(slot);
                }
                
                row.appendChild(colorSlots);
                
                this.sequenceContainer.appendChild(row);
                this.currentAttempt++;
                
                // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ
                this.scrollToBottom();
            }
            
            scrollToBottom() {
                // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
                setTimeout(() => {
                    this.gameArea.scrollTop = this.gameArea.scrollHeight;
                }, 50);
            }
            
            getCurrentRow() {
                return document.querySelector('.current-row');
            }
            
            addColorToRow(color) {
                const currentRow = this.getCurrentRow();
                if (!currentRow) return;
                
                const slots = currentRow.querySelectorAll('.color-slot');
                for (let slot of slots) {
                    if (!slot.style.backgroundColor) {
                        slot.style.backgroundColor = color;
                        slot.dataset.color = color;
                        break;
                    }
                }
            }
            
            removeLastColor() {
                const currentRow = this.getCurrentRow();
                if (!currentRow) return;
                
                const slots = Array.from(currentRow.querySelectorAll('.color-slot'));
                for (let i = slots.length - 1; i >= 0; i--) {
                    if (slots[i].style.backgroundColor) {
                        slots[i].style.backgroundColor = '';
                        delete slots[i].dataset.color;
                        break;
                    }
                }
            }
            
            showNotification(message) {
                this.notification.textContent = message;
                this.notification.style.display = 'block';
                setTimeout(() => {
                    this.notification.style.display = 'none';
                }, 2000);
            }
            
            checkCurrentRow() {
                const currentRow = this.getCurrentRow();
                if (!currentRow) return;
                
                const slots = currentRow.querySelectorAll('.color-slot');
                const userColors = Array.from(slots).map(slot => slot.dataset.color || null);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –ª–∏ –≤—Å—è —Å—Ç—Ä–æ–∫–∞
                if (userColors.includes(null)) {
                    this.showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å!');
                    return;
                }
                
                // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏
                currentRow.classList.remove('current-row');
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
                const feedback = document.createElement('div');
                feedback.className = 'feedback';
                currentRow.appendChild(feedback);
                
                // –í—ã—á–∏—Å–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
                const result = this.calculateFeedback(userColors);
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
                if (result.black > 0 || result.white > 0) {
                    // –°–Ω–∞—á–∞–ª–∞ —á–µ—Ä–Ω—ã–µ —Ç–æ—á–∫–∏
                    for (let i = 0; i < result.black; i++) {
                        const dot = document.createElement('div');
                        dot.className = 'feedback-dot black';
                        feedback.appendChild(dot);
                    }
                    
                    // –ó–∞—Ç–µ–º —Å–µ—Ä—ã–µ —Ç–æ—á–∫–∏
                    for (let i = 0; i < result.white; i++) {
                        const dot = document.createElement('div');
                        dot.className = 'feedback-dot white';
                        feedback.appendChild(dot);
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–±–µ–¥—É
                if (result.black === this.sequenceLength) {
                    const gameTime = Date.now() - this.gameStartTime;
                    this.showWinModal(this.currentAttempt, gameTime);
                    this.updateStats(true, this.currentAttempt, gameTime);
                    return;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ä–∞–∂–µ–Ω–∏–µ
                if (this.currentAttempt >= this.maxAttempts) {
                    const gameTime = Date.now() - this.gameStartTime;
                    this.showLoseModal();
                    this.updateStats(false, this.maxAttempts, gameTime);
                    return;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
                this.addNewRow();
            }
            
            showWinModal(attempts, gameTime) {
                document.getElementById('attemptsCount').textContent = attempts;
                const secretCodeContainer = document.getElementById('winSecretCode');
                secretCodeContainer.innerHTML = '';
                
                this.secretCode.forEach(color => {
                    const colorDiv = document.createElement('div');
                    colorDiv.className = 'secret-color';
                    colorDiv.style.backgroundColor = color;
                    secretCodeContainer.appendChild(colorDiv);
                });
                
                this.winModal.style.display = 'flex';
            }
            
            showLoseModal() {
                const secretCodeContainer = document.getElementById('loseSecretCode');
                secretCodeContainer.innerHTML = '';
                
                this.secretCode.forEach(color => {
                    const colorDiv = document.createElement('div');
                    colorDiv.className = 'secret-color';
                    colorDiv.style.backgroundColor = color;
                    secretCodeContainer.appendChild(colorDiv);
                });
                
                this.loseModal.style.display = 'flex';
            }
            
            showSurrenderModal() {
                const secretCodeContainer = document.getElementById('surrenderSecretCode');
                secretCodeContainer.innerHTML = '';
                
                this.secretCode.forEach(color => {
                    const colorDiv = document.createElement('div');
                    colorDiv.className = 'secret-color';
                    colorDiv.style.backgroundColor = color;
                    secretCodeContainer.appendChild(colorDiv);
                });
                
                this.surrenderModal.style.display = 'flex';
            }
            
            updateSurrenderButton() {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å–¥–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –ª–µ–≥–∫–æ–º —Ä–µ–∂–∏–º–µ
                if (this.difficulty === 1) {
                    this.surrenderBtn.style.display = 'block';
                } else {
                    this.surrenderBtn.style.display = 'none';
                }
            }
            
            calculateFeedback(userColors) {
                let black = 0; // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
                let white = 0; // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
                
                // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏–∏ –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞
                const secretCopy = [...this.secretCode];
                const userCopy = [...userColors];
                const usedSecret = new Array(this.sequenceLength).fill(false);
                const usedUser = new Array(this.sequenceLength).fill(false);
                
                // –°–Ω–∞—á–∞–ª–∞ —Å—á–∏—Ç–∞–µ–º —á–µ—Ä–Ω—ã–µ —Ç–æ—á–∫–∏ (—Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
                for (let i = 0; i < this.sequenceLength; i++) {
                    if (userCopy[i] === secretCopy[i]) {
                        black++;
                        usedSecret[i] = true;
                        usedUser[i] = true;
                    }
                }
                
                // –ó–∞—Ç–µ–º —Å—á–∏—Ç–∞–µ–º —Å–µ—Ä—ã–µ —Ç–æ—á–∫–∏ (—Ü–≤–µ—Ç–∞ –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö)
                for (let i = 0; i < this.sequenceLength; i++) {
                    if (!usedUser[i]) {
                        for (let j = 0; j < this.sequenceLength; j++) {
                            if (!usedSecret[j] && userCopy[i] === secretCopy[j]) {
                                white++;
                                usedSecret[j] = true;
                                break;
                            }
                        }
                    }
                }
                
                return { black, white };
            }
            
            setDifficulty(difficulty) {
                this.difficulty = difficulty;
                this.initializeGame();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                document.querySelectorAll('.difficulty-option').forEach(opt => {
                    opt.classList.remove('selected');
                    if (parseInt(opt.dataset.difficulty) === difficulty) {
                        opt.classList.add('selected');
                    }
                });
            }
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            loadStats() {
                const savedStats = localStorage.getItem('mastermindStats');
                if (savedStats) {
                    this.stats = JSON.parse(savedStats);
                } else {
                    this.stats = {
                        totalGames: 0,
                        totalWins: 0,
                        totalAttempts: 0,
                        totalTime: 0,
                        difficulty: {
                            1: { games: 0, wins: 0 },
                            2: { games: 0, wins: 0 },
                            3: { games: 0, wins: 0 }
                        }
                    };
                }
            }
            
            saveStats() {
                localStorage.setItem('mastermindStats', JSON.stringify(this.stats));
            }
            
            updateStats(isWin, attempts, gameTime) {
                this.stats.totalGames++;
                this.stats.totalAttempts += attempts;
                this.stats.totalTime += gameTime;
                
                if (isWin) {
                    this.stats.totalWins++;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                this.stats.difficulty[this.difficulty].games++;
                if (isWin) {
                    this.stats.difficulty[this.difficulty].wins++;
                }
                
                this.saveStats();
            }
            
            resetStats() {
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                    this.stats = {
                        totalGames: 0,
                        totalWins: 0,
                        totalAttempts: 0,
                        totalTime: 0,
                        difficulty: {
                            1: { games: 0, wins: 0 },
                            2: { games: 0, wins: 0 },
                            3: { games: 0, wins: 0 }
                        }
                    };
                    this.saveStats();
                    this.updateStatsDisplay();
                }
            }
            
            updateStatsDisplay() {
                document.getElementById('totalGames').textContent = this.stats.totalGames;
                document.getElementById('totalWins').textContent = this.stats.totalWins;
                
                const winRate = this.stats.totalGames > 0 ? 
                    Math.round((this.stats.totalWins / this.stats.totalGames) * 100) : 0;
                document.getElementById('winRate').textContent = `${winRate}%`;
                
                const avgAttempts = this.stats.totalGames > 0 ? 
                    (this.stats.totalAttempts / this.stats.totalGames).toFixed(1) : 0;
                document.getElementById('avgAttempts').textContent = avgAttempts;
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                const easyStats = this.stats.difficulty[1];
                const easyRate = easyStats.games > 0 ? 
                    Math.round((easyStats.wins / easyStats.games) * 100) : 0;
                document.getElementById('easyStats').textContent = 
                    `${easyStats.wins}/${easyStats.games} (${easyRate}%)`;
                
                const mediumStats = this.stats.difficulty[2];
                const mediumRate = mediumStats.games > 0 ? 
                    Math.round((mediumStats.wins / mediumStats.games) * 100) : 0;
                document.getElementById('mediumStats').textContent = 
                    `${mediumStats.wins}/${mediumStats.games} (${mediumRate}%)`;
                
                const hardStats = this.stats.difficulty[3];
                const hardRate = hardStats.games > 0 ? 
                    Math.round((hardStats.wins / hardStats.games) * 100) : 0;
                document.getElementById('hardStats').textContent = 
                    `${hardStats.wins}/${hardStats.games} (${hardRate}%)`;
            }
            
            bindEvents() {
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤
                document.querySelectorAll('.color-circle').forEach(circle => {
                    circle.addEventListener('click', (e) => {
                        const color = e.target.dataset.color;
                        this.addColorToRow(color);
                    });
                });
                
                // –ö–Ω–æ–ø–∫–∞ "–£–±—Ä–∞—Ç—å"
                this.removeBtn.addEventListener('click', () => {
                    this.removeLastColor();
                });
                
                // –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"
                this.checkBtn.addEventListener('click', () => {
                    this.checkCurrentRow();
                });
                
                // –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤–∞—è –∏–≥—Ä–∞"
                this.newGameBtn.addEventListener('click', () => {
                    this.secretCode = this.generateSecretCode();
                    this.initializeGame();
                });
                
                // –ö–Ω–æ–ø–∫–∞ "–ü–æ–º–æ—â—å"
                this.helpBtn.addEventListener('click', () => {
                    this.helpModal.style.display = 'flex';
                });
                
                // –ö–Ω–æ–ø–∫–∞ "–°–ª–æ–∂–Ω–æ—Å—Ç—å"
                this.difficultyBtn.addEventListener('click', () => {
                    this.difficultyModal.style.display = 'flex';
                });
                
                // –ö–Ω–æ–ø–∫–∞ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
                this.statsBtn.addEventListener('click', () => {
                    this.updateStatsDisplay();
                    this.statsModal.style.display = 'flex';
                });
                
                // –ö–Ω–æ–ø–∫–∞ "–°–¥–∞—Ç—å—Å—è"
                this.surrenderBtn.addEventListener('click', () => {
                    const gameTime = Date.now() - this.gameStartTime;
                    this.updateStats(false, this.currentAttempt, gameTime);
                    this.showSurrenderModal();
                });
                
                // –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                document.querySelectorAll('.difficulty-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        const difficulty = parseInt(e.target.closest('.difficulty-option').dataset.difficulty);
                        this.setDifficulty(difficulty);
                        this.difficultyModal.style.display = 'none';
                    });
                });
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
                this.closeWinModal.addEventListener('click', () => {
                    this.winModal.style.display = 'none';
                });
                
                this.closeHelpModal.addEventListener('click', () => {
                    this.helpModal.style.display = 'none';
                });
                
                this.closeLoseModal.addEventListener('click', () => {
                    this.loseModal.style.display = 'none';
                    this.secretCode = this.generateSecretCode();
                    this.initializeGame();
                });
                
                this.closeDifficultyModal.addEventListener('click', () => {
                    this.difficultyModal.style.display = 'none';
                });
                
                this.closeSurrenderModal.addEventListener('click', () => {
                    this.surrenderModal.style.display = 'none';
                });
                
                this.closeStatsModal.addEventListener('click', () => {
                    this.statsModal.style.display = 'none';
                });
                
                this.resetStatsBtn.addEventListener('click', () => {
                    this.resetStats();
                });
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                window.addEventListener('click', (e) => {
                    if (e.target === this.winModal) {
                        this.winModal.style.display = 'none';
                    }
                    if (e.target === this.helpModal) {
                        this.helpModal.style.display = 'none';
                    }
                    if (e.target === this.loseModal) {
                        this.loseModal.style.display = 'none';
                        this.secretCode = this.generateSecretCode();
                        this.initializeGame();
                    }
                    if (e.target === this.difficultyModal) {
                        this.difficultyModal.style.display = 'none';
                    }
                    if (e.target === this.surrenderModal) {
                        this.surrenderModal.style.display = 'none';
                    }
                    if (e.target === this.statsModal) {
                        this.statsModal.style.display = 'none';
                    }
                });
                
                // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                document.addEventListener('keydown', (e) => {
                    if (e.key >= '1' && e.key <= '6') {
                        const color = this.colors[parseInt(e.key) - 1];
                        this.addColorToRow(color);
                    } else if (e.key === 'Backspace') {
                        this.removeLastColor();
                    } else if (e.key === 'Enter') {
                        this.checkCurrentRow();
                    } else if (e.key === 'Escape') {
                        this.winModal.style.display = 'none';
                        this.helpModal.style.display = 'none';
                        this.loseModal.style.display = 'none';
                        this.difficultyModal.style.display = 'none';
                        this.surrenderModal.style.display = 'none';
                        this.statsModal.style.display = 'none';
                    }
                });
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫–æ–ª–µ—Å–∏–∫–æ–º –º—ã—à–∏
                this.gameArea.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    this.gameArea.scrollTop += e.deltaY;
                });
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                document.querySelector('.difficulty-option[data-difficulty="2"]').classList.add('selected');
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        document.addEventListener('DOMContentLoaded', () => {
            new MastermindGame();
        });
    </script>
</body>
</html>