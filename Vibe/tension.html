<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Расчеты тензодатчика</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f4f4f9;
      color: #333;
    }
    .container {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }
    .image-column {
      text-align: center;
      margin-bottom: 20px;
    }
    .circuit-diagram {
      width: 100%;
      height: 300px;
      background-image: url('https://thumb.cloud.mail.ru/weblink/thumb/xw1/BhcQ/B9ML4RqZA');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }
    .input-column {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .input-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .input-row {
      display: flex;
      gap: 10px;
    }
    .input-group {
      flex: 1;
      display: flex;
      align-items: center;
    }
    label {
      font-weight: bold;
      margin-right: 5px;
      font-size: 12px;
      width: 60px;
    }
    input[type="number"] {
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 60px;
      font-size: 12px;
    }
    .result-section {
      margin-top: 20px;
    }
    .formula {
      margin-top: 10px;
      font-style: italic;
      color: #666;
      font-size: 14px;
    }
    .result {
      margin-top: 10px;
      font-weight: bold;
      color: #007bff;
      font-size: 14px;
    }
    h1 {
      text-align: center;
      color: #555;
      margin-bottom: 20px;
      font-size: 24px;
    }
    h2 {
      color: #555;
      font-size: 18px;
    }
    
    /* Для больших экранов - двухколоночный режим */
    @media (min-width: 992px) {
      .main-content {
        display: flex;
        gap: 20px;
      }
      .image-column {
        flex: 1;
        margin-bottom: 0;
      }
      .input-column {
        flex: 2;
      }
      .circuit-diagram {
        height: 400px;
      }
    }
  </style>
</head>
<body>
  <h1>Расчет сопротивлений тензодатчика</h1>
  
  <div class="container">
    <!-- Изображение в начале для маленьких экранов -->
    <div class="image-column">
      <div class="circuit-diagram"></div>
    </div>
    
    <!-- Основной контент -->
    <div class="main-content">
      <!-- Для больших экранов изображение будет слева -->
      <div class="image-column large-screen-only" style="display: none;">
        <div class="circuit-diagram"></div>
      </div>

      <!-- Правая колонка с параметрами и результатами -->
      <div class="input-column">
        <form id="calcForm">
          <div class="input-section">
            <div class="input-row">
              <div class="input-group">
                <label for="R1">R1 (Ом):</label>
                <input type="number" id="R1" value="350" step="1" oninput="calculate()">
              </div>
              <div class="input-group">
                <label for="R2">R2 (Ом):</label>
                <input type="number" id="R2" value="350" step="1" oninput="calculate()">
              </div>
            </div>
            <div class="input-row">
              <div class="input-group">
                <label for="R3">R3 (Ом):</label>
                <input type="number" id="R3" value="350" step="1" oninput="calculate()">
              </div>
              <div class="input-group">
                <label for="R4">R4 (Ом):</label>
                <input type="number" id="R4" value="350" step="1" oninput="calculate()">
              </div>
            </div>
            <div class="input-row">
              <div class="input-group">
                <label for="R5">R5 (Ом):</label>
                <input type="number" id="R5" value="25" step="1" oninput="calculate()">
              </div>
              <div class="input-group">
                <label for="R6">R6 (Ом):</label>
                <input type="number" id="R6" value="25" step="1" oninput="calculate()">
              </div>
            </div>
            <div class="input-row">
              <div class="input-group">
                <label for="Vcc">Vcc (В):</label>
                <input type="number" id="Vcc" value="10" step="0.1" oninput="calculate()">
              </div>
            </div>
          </div>
        </form>

        <div class="result-section">
          <h2>Основные результаты расчетов:</h2>
          <div class="formula">Формула входного сопротивления: <span>Rin = R5 + R6 + ((R1 + R3) || (R2 + R4))</span></div>
          <div class="result" id="RinResult">Входное сопротивление: <span id="RinValue">-</span> Ом</div>

          <div class="formula">Формула выходного сопротивления: <span>Rout = (R1 + R2) || (R3 + R4)</span></div>
          <div class="result" id="RoutResult">Выходное сопротивление: <span id="RoutValue">-</span> Ом</div>

          <div class="formula">Формула выходного напряжения: <span>Vout = V_bridge * (R4 / (R4 + R2) - R3 / (R3 + R1))</span></div>
          <div class="result" id="VoutResult">Выходное напряжение: <span id="VoutValue">-</span> мВ</div>
        </div>

        <div class="result-section">
          <h2>Измерения сопротивления между входами/выходами:</h2>
          <div class="formula">Формула сопротивления между In+ и Out+: <span>R_in+_out+ = R5 + ((R1 + R3 + R4) || R2)</span></div>
          <div class="result" id="RinOutPlusResult">Сопротивление между In+ и Out+: <span id="RinOutPlusValue">-</span> Ом</div>

          <div class="formula">Формула сопротивления между In+ и Out-: <span>R_in+_out- = R5 + ((R2 + R3 + R4) || R1)</span></div>
          <div class="result" id="RinPlusOutMinusResult">Сопротивление между In+ и Out-: <span id="RinPlusOutMinusValue">-</span> Ом</div>

          <div class="formula">Формула сопротивления между In- и Out-: <span>R_in-_out- = R6 + ((R1 + R2 + R4) || R3)</span></div>
          <div class="result" id="RinMinusOutMinusResult">Сопротивление между In- и Out-: <span id="RinMinusOutMinusValue">-</span> Ом</div>

          <div class="formula">Формула сопротивления между In- и Out+: <span>R_in-_out+ = R6 + ((R1 + R2 + R3) || R4)</span></div>
          <div class="result" id="RinMinusOutPlusResult">Сопротивление между In- и Out+: <span id="RinMinusOutPlusValue">-</span> Ом</div>
        </div>

        <div class="result-section">
          <h2>Промежуточные расчеты:</h2>
          <div class="formula">Формула тока в цепи: <span>I = Vcc / Rin</span></div>
          <div class="result" id="CurrentResult">Ток в цепи: <span id="CurrentValue">-</span> мА</div>

          <div class="formula">Формула напряжения на мосту: <span>V_bridge = I * Rout</span></div>
          <div class="result" id="BridgeVoltageResult">Напряжение на мосту: <span id="BridgeVoltageValue">-</span> В</div>

          <div class="formula">Формула баланса моста Rb+: <span>Rb+ = R5 + (R1 || R2)</span></div>
          <div class="result" id="RbPlusResult">Баланс моста Rb+: <span id="RbPlusValue">-</span> Ом</div>

          <div class="formula">Формула баланса моста Rb-: <span>Rb- = R6 + (R3 || R4)</span></div>
          <div class="result" id="RbMinusResult">Баланс моста Rb-: <span id="RbMinusValue">-</span> Ом</div>

          <div class="formula">Формула напряжения на R5: <span>V_R5 = I * R5</span></div>
          <div class="result" id="VR5Result">Напряжение на R5: <span id="VR5Value">-</span> В</div>

          <div class="formula">Формула напряжения на R6: <span>V_R6 = I * R6</span></div>
          <div class="result" id="VR6Result">Напряжение на R6: <span id="VR6Value">-</span> В</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function calculate() {
      const R1 = parseFloat(document.getElementById('R1').value);
      const R2 = parseFloat(document.getElementById('R2').value);
      const R3 = parseFloat(document.getElementById('R3').value);
      const R4 = parseFloat(document.getElementById('R4').value);
      const R5 = parseFloat(document.getElementById('R5').value);
      const R6 = parseFloat(document.getElementById('R6').value);
      const Vcc = parseFloat(document.getElementById('Vcc').value);

      // Calculate parallel resistance
      const parallel = (a, b) => a * b / (a + b);

      // Исправленные формулы
      // Input resistance calculation: Rin = R5 + R6 + ((R1 + R3) || (R2 + R4))
      const Rin = R5 + R6 + parallel(R1 + R3, R2 + R4);

      // Output resistance calculation: Rout = (R1 + R2) || (R3 + R4)
      const Rout = parallel(R1 + R2, R3 + R4);

      // Промежуточные расчеты
      // Ток в цепи: I = Vcc / Rin (в миллиамперах)
      const Current = (Vcc / Rin) * 1000;
      
      // Напряжение на мосту: V_bridge = I * Rout (в вольтах)
      const BridgeVoltage = (Current / 1000) * Rout;
      
      // Баланс моста
      const RbPlus = R5 + parallel(R1, R2);    // Rb+ = R5 + (R1 || R2)
      const RbMinus = R6 + parallel(R3, R4);   // Rb- = R6 + (R3 || R4)
      
      // Напряжение на R5: V_R5 = I * R5
      const VR5 = (Current / 1000) * R5;
      
      // Напряжение на R6: V_R6 = I * R6
      const VR6 = (Current / 1000) * R6;

      // Output voltage calculation: Vout = V_bridge * (R4 / (R4 + R2) - R3 / (R3 + R1)) (в милливольтах)
      const Vout = BridgeVoltage * (R4 / (R4 + R2) - R3 / (R3 + R1)) * 1000;

      // Additional resistance measurements
      const RinOutPlus = R5 + parallel(R1 + R3 + R4, R2);       // In+ to Out+
      const RinPlusOutMinus = R5 + parallel(R2 + R3 + R4, R1);  // In+ to Out-
      const RinMinusOutMinus = R6 + parallel(R1 + R2 + R4, R3); // In- to Out-
      const RinMinusOutPlus = R6 + parallel(R1 + R2 + R3, R4);  // In- to Out+

      // Display main results
      document.getElementById('RinValue').textContent = Rin.toFixed(2);
      document.getElementById('RoutValue').textContent = Rout.toFixed(2);
      document.getElementById('VoutValue').textContent = Vout.toFixed(3);
      
      document.getElementById('RinOutPlusValue').textContent = RinOutPlus.toFixed(2);
      document.getElementById('RinPlusOutMinusValue').textContent = RinPlusOutMinus.toFixed(2);
      document.getElementById('RinMinusOutMinusValue').textContent = RinMinusOutMinus.toFixed(2);
      document.getElementById('RinMinusOutPlusValue').textContent = RinMinusOutPlus.toFixed(2);

      // Display intermediate results
      document.getElementById('CurrentValue').textContent = Current.toFixed(3);
      document.getElementById('BridgeVoltageValue').textContent = BridgeVoltage.toFixed(3);
      document.getElementById('RbPlusValue').textContent = RbPlus.toFixed(2);
      document.getElementById('RbMinusValue').textContent = RbMinus.toFixed(2);
      document.getElementById('VR5Value').textContent = VR5.toFixed(3);
      document.getElementById('VR6Value').textContent = VR6.toFixed(3);
    }

    // Initial calculation on page load
    calculate();
    
    // Handle responsive layout
    function handleResponsiveLayout() {
      const largeScreenImage = document.querySelector('.large-screen-only');
      const smallScreenImage = document.querySelector('.image-column:not(.large-screen-only)');
      
      if (window.innerWidth >= 992) {
        largeScreenImage.style.display = 'block';
        smallScreenImage.style.display = 'none';
      } else {
        largeScreenImage.style.display = 'none';
        smallScreenImage.style.display = 'block';
      }
    }
    
    // Initial check
    handleResponsiveLayout();
    
    // Listen for resize events
    window.addEventListener('resize', handleResponsiveLayout);
  </script>
</body>
</html>