let el=document.getElementsByTagName("body")[0],canvas=document.createElement("canvas");canvas.id="can",el.insertBefore(canvas,el.firstChild),canvas.width=document.documentElement.scrollWidth,canvas.height=document.documentElement.scrollHeight,canvas.style.zIndex="2000",canvas.style.position="absolute",canvas.style.top="0",ctx=canvas.getContext("2d"),document.addEventListener("keydown",(function(){"Escape"==(event.key||event.code)&&canvas.remove()}));var firstStart=!0;let mainlength=0,width=0,height=0,imgInput=document.getElementById("image-input"),startPointX=0,endPointX=0,startPointY=0,endPointY=0;var stratLine=!1,colorset=!1,flag=!1,prevX=0,currX=0,prevY=0,currY=0,dot_flag=!1,x="black",y=1;function findxy(t,e){"down"==t&&(prevX=currX,prevY=currY,currX=e.clientX-canvas.offsetLeft+window.pageXOffset,currY=e.clientY-canvas.offsetTop+window.pageYOffset,flag=!0,dot_flag=!0,stratLine?(endPointX=e.clientX-canvas.offsetLeft+window.pageXOffset,endPointY=e.clientY-canvas.offsetTop+window.pageYOffset,drawlineXY()):(startPointX=e.clientX-canvas.offsetLeft+window.pageXOffset,startPointY=e.clientY-canvas.offsetTop+window.pageYOffset,stratLine=!0),firstStart?(x="red",y=2):colorset||(x="black",y=1),dot_flag&&(ctx.beginPath(),ctx.fillStyle=x,ctx.fillRect(currX,currY,1,1),ctx.closePath(),dot_flag=!1)),"up"!=t&&"out"!=t||(flag=!1),"move"==t&&flag&&(prevX=currX,prevY=currY,currX=e.clientX-canvas.offsetLeft+window.pageXOffset,currY=e.clientY-canvas.offsetTop+window.pageYOffset)}function drawlineXY(){ctx.beginPath(),ctx.moveTo(startPointX,startPointY),ctx.lineTo(endPointX,endPointY),ctx.strokeStyle=x,ctx.lineWidth=y,ctx.stroke(),ctx.closePath(),stratLine=!1;let t=Math.sqrt((endPointX-startPointX)**2+(endPointY-startPointY)**2);firstStart&&(mainlength=t,firstStart=!1);let e=t.toFixed(1)+" ("+(t/mainlength).toFixed(2)+")";ctx.font="12px serif",ctx.fillText(e,(endPointX+startPointX)/2-20,(endPointY+startPointY)/2-5)}canvas.addEventListener("mousemove",(function(t){findxy("move",t)}),!1),canvas.addEventListener("mousedown",(function(t){findxy("down",t)}),!1),canvas.addEventListener("mouseup",(function(t){findxy("up",t)}),!1),canvas.addEventListener("mouseout",(function(t){findxy("out",t)}),!1);